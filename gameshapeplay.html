<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shape Sense</title>
  <link rel="stylesheet" href="/css/gameshapeplay.css">
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <h1></h1>

  <!-- Loading Camera.... -->
  <div id="loadingOverlay" 
    style="position:absolute; top:0; left:0; width:100%; height:100%; 
          background:rgba(0,0,0,0.6); color:white; font-size:32px; 
          display:flex; align-items:center; justify-content:center; 
          z-index:20; display:none;">
    ðŸ“· Loading... Starting Camera
  </div>


  <!-- Wrap canvas + title -->
  <div id="gameWrapper">
    <canvas id="output_canvas" width="960" height="540"></canvas>
    <div id="gameTitle">Shape Sense</div>
    <button id="muteBtn">ðŸ”Š</button>
    <button id="startBtnOverlay">Start Game</button> 
    <button id="playAgainBtn" style="display:none;">Play Again</button>
    <button id="exitBtn" style="display:none;">Next Game</button>
    
    <!-- Black Status Bar -->
    <div id="statusBar">
      <div id="score">Score: 0</div>
      <div id="timer">Time: 0s</div>
      <button id="closeBtn">âœ– Exit</button>
    </div>
  </div>
  
<!-- Custom Exit Popup -->
<div id="exitPopup" class="popup">
  <div class="popup-content">
    <h3>Exit Game?</h3>
    <p>Are you sure you want to leave this game?</p>
    <div class="popup-buttons">
      <button id="confirmExitBtn">Yes, Exit</button>
      <button id="cancelExitBtn">Cancel</button>
    </div>
  </div>
</div>



  
  
<script type="module">
  import {
    FilesetResolver,
    HandLandmarker,
    DrawingUtils
  } from "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest";

  // Make them global so your other JS can use them
  window.FilesetResolver = FilesetResolver;
  window.HandLandmarker = HandLandmarker;
  window.DrawingUtils = DrawingUtils;
</script>


<!-- MediaPipe & p5.js -->
<script src="https://cdn.jsdelivr.net/npm/p5/lib/p5.min.js"></script>



  <!-- Game Logic -->
  <script src="gameshape.js"></script>
 


  <script>
    const closeBtn = document.getElementById("closeBtn");
    const popup = document.getElementById("exitPopup");
    const confirmExitBtn = document.getElementById("confirmExitBtn");
    const cancelExitBtn = document.getElementById("cancelExitBtn");

    // Show popup
    closeBtn.addEventListener("click", () => {
      popup.style.display = "flex";
    });

    // Exit confirmed
    confirmExitBtn.addEventListener("click", () => {
      window.location.href = "dashgames.html";
    });

    // Cancel exit
    cancelExitBtn.addEventListener("click", () => {
      popup.style.display = "none";
    });

    // Close popup if click outside
    popup.addEventListener("click", (e) => {
      if (e.target === popup) popup.style.display = "none";
    });
  </script>

</body>
</html>
